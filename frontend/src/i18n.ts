export type Lang = 'fr' | 'en';

const dictionaries: Record<Lang, Record<string, string>> = {
  fr: {
    live: 'Temps réel',
    history: 'Historique',
    fleet: 'Flotte',
    help: 'Aide',
    actions: 'Actions système',
    health: 'Santé',
    healthScore: 'Score de santé',
    lastMeasure: 'Dernière mesure',
    refresh: 'Rafraîchir',
    systemMetrics: 'Métriques système',
    statusOk: 'OK',
    statusWarn: 'Avertissement',
    statusCritical: 'Critique',
    statusExpired: 'Expiré',
    machines: 'Machines',
    filters: 'Filtres',
    sort: 'Trier',
    byScore: 'Par score',
    byRecent: 'Par récence',
    adminTokens: 'Tokens',
    helpTitle: 'Aide et intégration',
    systemDashboard: 'Tableau de bord système',
    liveDesc: 'CPU, RAM, Disque et temps de disponibilité mis à jour toutes les 2.5s.',
    highLoad: 'Charge élevée',
    healthy: 'En bonne santé',
    cpu: 'CPU',
    memory: 'Mémoire',
    disk: 'Disque',
    uptime: 'Disponibilité',
    status: 'Statut',
    fetching: 'Chargement...',
    updated: 'Mis à jour',
    ready: 'Prêt',
    running: 'En cours...',
    fleetHealth: 'Santé de la flotte',
    fleetDesc: 'Vue centralisée des machines qui rapportent des métriques.',
    all: 'Tout',
    ok: 'OK',
    warning: 'Avertissement',
    critical: 'Critique',
    expired: 'Expiré',
    sortScoreDesc: 'Score (décroissant)',
    sortScoreAsc: 'Score (croissant)',
    sortLastDesc: 'Dernier (récent)',
    sortLastAsc: 'Dernier (ancien)',
    loading: 'Chargement...',
    error: 'Erreur',
    noMachines: 'Aucune machine ne rapporte. Déployez un agent qui envoie des données à /api/fleet/report.',
    last: 'Dernier',
    historyTitle: 'Métriques de performance',
    historyDesc: 'Vue historique des métriques système au fil du temps.',
    samples: 'échantillons',
    loadingHistory: 'Chargement de l\'historique...',
    cpuRamDisk: 'CPU, RAM et Disque dans le temps',
    latestSamples: 'Derniers échantillons',
    timestamp: 'Horodatage',
    hostname: 'Nom d\'hôte',
    agentDeployment: 'Déploiement de l\'agent et intégration',
    helpDesc: 'Référence rapide pour déployer des agents et utiliser l\'API.',
    deployAgent: '1. Déployer l\'agent',
    mainEndpoints: '2. Endpoints principaux',
    noAuth: '3. Sans authentification',
    systemActions: '4. Actions système',
    envVars: '5. Variables d\'environnement',
    runningDashboard: '6. Exécution du tableau de bord',
    dashboardPages: 'Pages du tableau de bord',
    agentFormat: 'Format de rapport de l\'agent',
    themeLight: 'Clair',
    themeDark: 'Sombre',
    unknown: 'Inconnu',
  },
  en: {
    live: 'Live',
    history: 'History',
    fleet: 'Fleet',
    help: 'Help',
    actions: 'Approved actions',
    health: 'Health',
    lastMeasure: 'Latest reading',
    refresh: 'Refresh',
    systemMetrics: 'System metrics',
    statusOk: 'OK',
    statusWarn: 'Warning',
    statusCritical: 'Critical',
    statusExpired: 'Expired',
    machines: 'Machines',
    filters: 'Filters',
    sort: 'Sort',
    byScore: 'Score',
    byRecent: 'Recent',
    adminTokens: 'Download tokens',
    helpTitle: 'Help & onboarding',
  },
};

export function getLabel(key: string, lang: Lang): string {
  return dictionaries[lang][key] || key;
}

export function getInitialLang(): Lang {
  const stored = localStorage.getItem('dash_lang');
  if (stored === 'fr' || stored === 'en') return stored;
  return 'fr';
}
